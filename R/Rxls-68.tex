%% LaTeX2e file `R/Rxls-68.Rnw'
%% generated by the `Rnw' environment
%% from source `Rxls' on 2015/09/05.
%%
\begin{kframe}
\noindent{\color{srccolor}require(inline)}
\noindent{\color{srccolor}require(Rcpp)}
\noindent{\color{srccolor}funs<-c("LENGTH","Rf\_length")}
\noindent{\color{srccolor}names(funs)<-paste("test",funs,sep="\_")}
\noindent{\color{srccolor}body.pat<-'}
\noindent{\color{srccolor}  SEXP sexp = R\_NilValue;}
\noindent{\color{srccolor}  sexp = R\_MakeExternalPtr(NULL,R\_NilValue,R\_NilValue);}
\noindent{\color{srccolor}  return IntegerVector::create( \_["\%s"]=\%s(sexp));}
\noindent{\color{srccolor}'}
\noindent{\color{srccolor}body<-lapply(funs,function(x)sprintf(body.pat,x,x))}
\noindent{\color{srccolor}test<-cxxfunction(sig=lapply(funs,"[",0), body=body, plugin="Rcpp")}
\noindent{\color{srccolor}names(test)<-funs}
\noindent{\color{srccolor}for(x in names(test))\{}
\noindent{\color{srccolor}  cat(sprintf("Running 'test\$\%s':\textbackslash{}n result: ",x))}
\noindent{\color{srccolor}  cat(eval(substitute(try(test[[x]](),silent=T),list(x=x))))}
\noindent{\color{srccolor}\}}
\noindent{\color{outcolor}Running 'test\$LENGTH':}
\noindent{\color{outcolor} result: Error in test[["LENGTH"]]() : }
\noindent{\color{outcolor}  LENGTH or similar applied to externalptr object}
\noindent{\color{outcolor}Running 'test\$Rf\_length':}
\noindent{\color{outcolor} result: 1}
\end{kframe}
